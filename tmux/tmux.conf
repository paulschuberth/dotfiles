# remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-s send-prefix

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Set size of scrollback buffer to 50k lines
set-option -g history-limit 50000

set-window-option -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

# Enable mouse mode
set -g mouse on
set -g mouse-select-pane on

# Open this config via key binding
bind-key P split-window -h "vim ~/.tmux.conf"

# Reload config via key binding
bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

# Enable focus events for git g#utter plugin in vim
set -g focus-events on

# disables timeout after pressing escape
set -sg escape-time 0

# set repeat timeout
set -g repeat-time 300

# set Control + k to clear history. No prefix!
bind -n C-k clear-history

# set fish as default
set -g default-command /opt/homebrew/bin/fish
set -g default-shell /opt/homebrew/bin/fish
set -g default-terminal "xterm"

# Renumber windows
set -g renumber-windows on

# Show times longer than supposed
set -g display-panes-time 2000

# tmux messages are displayed for 4 seconds
set -g display-time 4000

# word separators for automatic word selection
setw -g word-separators ' @"=()[]_-:,.'
setw -ag word-separators "'"

# move status bar to the top
set-option -g status-position top

# Write current cf org and space into status bar
set -g status-right '#(cf-target-info)'

set -g default-terminal "screen-256color"
set -ag terminal-overrides ",alacritty:RGB"

# Install plugins

## Pomodoro timer
set -g @plugin 'olimorris/tmux-pomodoro-plus'
set -g @pomodoro_notifications 'on'
set -g @pomodoro_sound 'on'

# CPU & Memory load
set -g @plugin 'thewtex/tmux-mem-cpu-load'

# Now playing
set -g @plugin 'spywhere/tmux-now-playing'
# run tmux plugin manager
run ~/dotfiles/tmux/tpm/tpm
